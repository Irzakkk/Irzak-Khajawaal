{%- comment -%}
  sections/gift-guide-banner.liquid
  - Header with logo / tagline / choose button (desktop)
  - Mobile hamburger (left) opens overlay with logo → tagline → choose button
  - Hero banner with desktop overlay content bottom-left and mobile content above banner
  - Mobile CTA inside banner centered bottom, wider, no hover animation
  - All top texts/buttons editable via schema
{%- endcomment -%}

{% liquid
  assign sec = section
%}

<section id="gift-guide-{{ section.id }}" data-section-id="{{ section.id }}" class="gift-guide-section">
  {%- style -%}
    /* ---------- VARIABLES ---------- */
    #gift-guide-{{ section.id }} {
      --gg-max-w: 1280px;
      --gg-yellow: {{ section.settings.choose_btn_bg | default: '#FFE34D' }};
      --gg-bg: {{ section.settings.section_bg | default: '#ffffff' }};
      --gg-text: {{ section.settings.text_color | default: '#111111' }};
      --gg-black: #000000;
      width: 100%;
      background: var(--gg-bg);
      color: var(--gg-text);
      box-sizing: border-box;
    }

    /* ---------- HEADER ---------- */
    #gift-guide-{{ section.id }} .hb {
      background: {{ section.settings.header_bg | default: '#ffffff' }};
      border-bottom: 1px solid rgba(0,0,0,0.06);
      position: relative;
      z-index: 1200;
    }
    #gift-guide-{{ section.id }} .hb-inner {
      max-width: var(--gg-max-w);
      margin: 0 auto;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: relative;
      height: 64px;
    }

    /* Left (desktop logo) */
    #gift-guide-{{ section.id }} .hb-left { display:flex; align-items:center; gap:12px; min-width:160px; }
    #gift-guide-{{ section.id }} .hb-logo { font-size:22px; font-weight:700; margin:0; color:var(--gg-text); }

    /* Center tagline desktop */
    #gift-guide-{{ section.id }} .hb-tagline--desktop {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      font-size:14px;
      white-space: nowrap;
      color:var(--gg-text);
    }

    /* Right choose button (desktop) */
    #gift-guide-{{ section.id }} .hb-right { min-width:170px; display:flex; justify-content:flex-end; }
    #gift-guide-{{ section.id }} .hb-choose {
      display:inline-flex; align-items:center; gap:12px; padding:12px 24px; border-radius:8px;
      background: var(--gg-yellow); color:#111; font-weight:700; text-decoration:none;
      border:1px solid rgba(0,0,0,0.06); transition: background .18s ease, color .18s ease, transform .12s ease, box-shadow .12s ease;
    }
    #gift-guide-{{ section.id }} .hb-choose:hover { background: var(--gg-black); color: var(--gg-yellow); transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,.12); }

    /* Hamburger (mobile) - placed left on mobile */
    #gift-guide-{{ section.id }} .hb-hamburger {
      display: none;
      background: transparent;
      border: 0;
      font-size: 22px;
      cursor: pointer;
      padding: 8px;
      width: 44px;
      height: 44px;
      line-height:1;
      z-index: 9999;
    }

    /* Mobile overlay menu (fixed) */
    #gift-guide-{{ section.id }} .hb-mobile-menu {
      display: none;
      position: fixed;
      inset: 0;
      background: {{ section.settings.header_bg | default: '#ffffff' }};
      padding: 36px 20px 24px;
      z-index: 9998;
      overflow-y: auto;
    }
    #gift-guide-{{ section.id }} .hb-mobile-menu.open { display: block; }

    #gift-guide-{{ section.id }} .hb-mobile-inner {
      max-width: var(--gg-max-w);
      margin: 0 auto;
      display:flex;
      flex-direction:column;
      align-items:center;
    }

    #gift-guide-{{ section.id }} .hb-mobile-logo {
      font-size:22px;
      font-weight:800;
      margin-bottom:20px;
      text-align:center;
      color:var(--gg-text);
      width:100%;
    }

    #gift-guide-{{ section.id }} .hb-mobile-tagline {
      font-size:16px;
      margin-bottom:20px;
      text-align:center;
      color:var(--gg-text);
    }

    #gift-guide-{{ section.id }} .hb-choose-mobile {
      display:inline-block;
      width:100%;
      max-width:420px;
      text-align:center;
      padding:14px 18px;
      border-radius:8px;
      background: var(--gg-yellow);
      color: #111;
      font-weight:700;
      text-decoration:none;
      border:1px solid rgba(0,0,0,0.06);
    }
    #gift-guide-{{ section.id }} .hb-choose-mobile:hover { background: var(--gg-black); color: var(--gg-yellow); }

    /* ---------- ANNOUNCEMENT BAR ---------- */
    #gift-guide-{{ section.id }} .gg-announcement { width:100%; background: {{ section.settings.announcement_bg | default: '#efefef' }}; }
    #gift-guide-{{ section.id }} .gg-announcement__inner { max-width:var(--gg-max-w); margin:0 auto; padding:10px 16px; display:flex; justify-content:center; align-items:center; font-size:14px; }
    #gift-guide-{{ section.id }} .gg-announcement__text { text-align:center; }

    /* ---------- HERO ---------- */
    #gift-guide-{{ section.id }} .gg-wrap { position: relative; max-width: var(--gg-max-w); margin: 0 auto; }
    #gift-guide-{{ section.id }} .gg-content { position: relative; z-index: 2; padding: 20px 16px 0; max-width: 720px; }
    .gg-heading { font-size: clamp(36px, 5.2vw, 84px); line-height: .95; font-weight:700; margin:0 0 12px; }
    .gg-heading--mobile { display:none; font-size:28px; line-height:1.05; font-weight:700; margin:6px 0 8px; }
    .gg-subtext { font-size: clamp(14px, 1.5vw, 18px); line-height:1.6; max-width:620px; margin:0; }
    .gg-subtext--mobile { display:none; }

    .gg-cta {
      margin-top:20px;
      display:inline-flex; align-items:center; gap:14px;
      background: var(--gg-black); color:#fff; text-decoration:none;
      padding:16px 40px; border-radius:10px; border:2px solid var(--gg-black); font-weight:700;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .gg-cta:hover { transform: translateY(-2px); box-shadow: 0 10px 28px rgba(0,0,0,.18); }

    .gg-cta--mobile {
      position:absolute; left:50%; bottom:20px; transform:translateX(-50%);
      display:none;
      padding:16px 56px; border-radius:12px;
      background:var(--gg-black); color:#fff; font-weight:700;
      text-decoration:none; border:2px solid var(--gg-black);
    }
    .gg-cta--mobile:hover { transform:none; box-shadow:none; }

    .gg-hero__media { width:100%; height:560px; overflow:hidden; }
    .gg-hero__media img { width:100%; height:100%; object-fit:cover; }

    .gg-strip { background:#f7f7f7; border-top:1px solid rgba(0,0,0,.08); border-bottom:1px solid rgba(0,0,0,.08); }
    .gg-strip__inner { max-width:var(--gg-max-w); margin:0 auto; padding:10px 16px; text-align:center; font-size:12px; font-weight:600; }

    /* ---------- LAYOUT ---------- */
    @media (min-width: 990px) {
      .hb-hamburger, .hb-mobile-menu, .gg-heading--mobile, .gg-subtext--mobile, .gg-cta--mobile { display:none !important; }
      .gg-content { position:absolute; left:24px; bottom:40px; }
      .gg-hero__media { height:720px; }
    }

    @media (max-width: 989px) {
      .hb-inner { justify-content:center; }
      .hb-hamburger { display:inline-flex; position:absolute; left:12px; }
      .hb-right, .hb-tagline--desktop { display:none; }

      .gg-content { position:static; text-align:center; }
      .gg-heading { display:none; }
      .gg-subtext { display:none; }
      .gg-heading--mobile { display:block; }
      .gg-subtext--mobile { display:block; margin-bottom:6px; }
      .gg-hero__media { height:420px; }
      .gg-cta { display:none; }
      .gg-cta--mobile { display:inline-flex; }
    }
  {%- endstyle -%}

  <!-- HEADER -->
  <div class="hb">
    <div class="hb-inner">
      <div class="hb-left"><div class="hb-logo">{{ section.settings.logo_text }}</div></div>
      <div class="hb-tagline--desktop">{{ section.settings.tagline_text }}</div>
      <div class="hb-right">
        {%- if section.settings.choose_btn_label != blank -%}
          <a class="hb-choose" href="{{ section.settings.choose_btn_link }}">{{ section.settings.choose_btn_label }}</a>
        {%- endif -%}
      </div>
      <button class="hb-hamburger" id="hbHamburger-{{ section.id }}" aria-controls="hbMobileMenu-{{ section.id }}" aria-expanded="false" aria-label="Open menu" type="button">
        <span id="hbHamburgerIcon-{{ section.id }}">☰</span>
      </button>
    </div>

    <!-- Mobile overlay menu -->
    <div class="hb-mobile-menu" id="hbMobileMenu-{{ section.id }}" aria-hidden="true">
      <div class="hb-mobile-inner">
        <div class="hb-mobile-logo">{{ section.settings.logo_text }}</div>
        <div class="hb-mobile-tagline">{{ section.settings.tagline_text }}</div>
        {%- if section.settings.choose_btn_label != blank -%}
          <a class="hb-choose-mobile" href="{{ section.settings.choose_btn_link }}">{{ section.settings.choose_btn_label }}</a>
        {%- endif -%}
      </div>
    </div>
  </div>

  <!-- Announcement bar -->
  <div class="gg-announcement" {% if section.settings.hide_announcement %}style="display:none"{% endif %}>
    <div class="gg-announcement__inner"><div class="gg-announcement__text">{{ section.settings.announcement_text }}</div></div>
  </div>

  <!-- HERO -->
  <div class="gg-wrap">
    <div class="gg-content">
      <h2 class="gg-heading">{{ section.settings.heading }}</h2>
      <div class="gg-subtext">{{ section.settings.subtext }}</div>
      <h2 class="gg-heading--mobile">{{ section.settings.mobile_heading }}</h2>
      <div class="gg-subtext--mobile">{{ section.settings.mobile_subtext }}</div>
      {%- if section.settings.cta_label != blank -%}
        <a class="gg-cta" href="{{ section.settings.cta_link }}">{{ section.settings.cta_label }}</a>
      {%- endif -%}
    </div>
    <div class="gg-hero">
      <div class="gg-hero__media">
        {% if section.settings.bg_image != blank %}
          {%- render 'image', image: section.settings.bg_image, widths: '750,1100,1500,2000', sizes: '100vw', alt: section.settings.bg_image.alt | escape -%}
        {% else %}
          <img src="{{ 'placeholder-image.png' | asset_url }}" alt="">
        {% endif %}
        {%- if section.settings.cta_label != blank -%}
          <a class="gg-cta--mobile" href="{{ section.settings.cta_link }}">{{ section.settings.cta_label }}</a>
        {%- endif -%}
      </div>
    </div>
  </div>

  <div class="gg-strip"><div class="gg-strip__inner">{{ section.settings.bottom_strip_text }}</div></div>
</section>

<script>
(function(){
  'use strict';
  var root=document.currentScript&&document.currentScript.previousElementSibling;
  if(!root||!root.dataset||!root.dataset.sectionId){var secs=document.querySelectorAll('[id^="gift-guide-"]');root=secs[secs.length-1]||document.body;}
  var sectionId=root.dataset?root.dataset.sectionId:null;if(!sectionId)return;
  var hb=document.getElementById('hbHamburger-'+sectionId),menu=document.getElementById('hbMobileMenu-'+sectionId),icon=document.getElementById('hbHamburgerIcon-'+sectionId);
  if(!hb||!menu)return;
  function lockScroll(l){document.documentElement.style.overflow=l?'hidden':'';document.body.style.overflow=l?'hidden':'';}
  function open(){menu.classList.add('open');hb.setAttribute('aria-expanded','true');menu.setAttribute('aria-hidden','false');if(icon)icon.textContent='✕';lockScroll(true);}
  function close(){menu.classList.remove('open');hb.setAttribute('aria-expanded','false');menu.setAttribute('aria-hidden','true');if(icon)icon.textContent='☰';lockScroll(false);}
  hb.addEventListener('click',function(){menu.classList.contains('open')?close():open();});
  document.addEventListener('keydown',function(e){if(e.key==='Escape'&&menu.classList.contains('open'))close();});
  window.addEventListener('resize',function(){if(window.innerWidth>=990&&menu.classList.contains('open'))close();});
})();
</script>

{%- schema -%}
{
  "name": "Gift Guide Banner",
  "settings": [
    { "type": "text", "id": "logo_text", "label": "Logo text", "default": "TISSO VISION" },
    { "type": "text", "id": "tagline_text", "label": "Header tagline", "default": "Find the ideal gift for your loved ones." },
    { "type": "url", "id": "choose_btn_link", "label": "Choose Gift Button Link", "default": "/" },
    { "type": "text", "id": "choose_btn_label", "label": "Choose button label", "default": "CHOOSE GIFT" },
    { "type": "color", "id": "choose_btn_bg", "label": "Choose button color", "default": "#FFE34D" },
    { "type": "color", "id": "header_bg", "label": "Header background", "default": "#ffffff" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#111111" },
    { "type": "header", "content": "Announcement" },
    { "type": "checkbox", "id": "hide_announcement", "label": "Hide announcement", "default": true },
    { "type": "text", "id": "announcement_text", "label": "Announcement text", "default": "Find the ideal gift for your loved ones." },
    { "type": "color", "id": "announcement_bg", "label": "Announcement background", "default": "#efefef" },
    { "type": "header", "content": "Hero" },
    { "type": "image_picker", "id": "bg_image", "label": "Hero background image" },
    { "type": "text", "id": "heading", "label": "Hero heading (desktop)", "default": "The Gift Guide" },
    { "type": "richtext", "id": "subtext", "label": "Hero subtext (desktop)", "default": "<p>Discover Joy: Your Ultimate Holiday Gift Destination.</p>" },
    { "type": "text", "id": "mobile_heading", "label": "Hero heading (mobile)", "default": "Gift Box" },
    { "type": "text", "id": "mobile_subtext", "label": "Hero subtext (mobile)", "default": "Find the ideal gift for your loved ones." },
    { "type": "text", "id": "cta_label", "label": "CTA label", "default": "SHOP NOW" },
    { "type": "url", "id": "cta_link", "label": "CTA link", "default": "/" },
    { "type": "header", "content": "Bottom strip" },
    { "type": "text", "id": "bottom_strip_text", "label": "Bottom strip text", "default": "SUSTAINABLE, ETHICALLY MADE CLOTHES IN SIZES XXS TO 6XL" },
    { "type": "color", "id": "section_bg", "label": "Section background", "default": "#ffffff" }
  ],
  "presets": [{ "name": "Gift Guide Banner" }]
}
{%- endschema -%}
